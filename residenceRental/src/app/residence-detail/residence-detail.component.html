
<div class="detail" *ngIf="!toReserve && !submitted">

  <img [src]="'../../assets/images/res'+ residence.id+'.jpg'" />
  <h1>{{residence.nom}}</h1>
  <i>{{residence.adresse}}</i>
  <p>
   {{residence.description}}
  </p>

<table>
  <tr>
    <td><b>nombre de studios:</b></td>
    <td>{{residence.n_studios}}</td>
  </tr>
  <tr>
    <td><b>nombre de studios libres:</b></td>
    <td>{{residence.n_libres}}</td>
  </tr>
  <tr>
    <td><b>prix minimal:</b> </td>
    <td>{{residence.minPrix}} €</td>
  </tr>
  <tr>
    <td>
      <b>prix maximal:</b>
    </td>
    <td>{{residence.maxPrix}} €</td>
  </tr>
</table>
</div>
<div class="res"*ngIf="residence && !toReserve && !submitted">
  <table>
    <tr>
      <th>type</th>
      <th>superficie</th>
      <th>prix par mois</th>
      <th>prix de caution</th>
      <th>nombre de studios</th>
      <th>studios libres</th>
      <th>réserver</th>
    </tr>
    <tr *ngFor="let std of studios">
      <td>{{std.type}}</td>
      <td>{{std.superficie}}</td>
      <td>{{std.prixmois}}</td>
      <td>{{std.prixcaution}}</td>
      <td>{{std.n_occurence}}</td>
      <td>{{std.n_libres}}</td>
      <td>
        <button *ngIf="std.n_libres != 0"(click) = "onClick(std)">Cliquer pour réserver</button>
        <p *ngIf="std.n_libres==0">Complet</p>
      </td>
    </tr>
  </table>
</div>
<div class="form" *ngIf="toReserve">
    <h1 class="h1">A remplir pour réserver</h1>
    <form #userForm ="ngForm"  *ngIf="!submitted" (ngSubmit)="onSubmit(userForm.value)" novalidate>
      <div class="row">
        <div class="col">
          <label>Nom</label>
          <input type="text" required #nom="ngModel" [class.is-invalid]="nom.invalid"  class="form-control && nom.touched"  name="nom"  placeholder="Nom" [ngModel]>
        </div>
        <div class="col">
          <label>Prenom</label>
          <input type="text" required #prenom="ngModel" [class.is-invalid]="prenom.invalid"  class="form-control && prenom.touched" name="prenom" placeholder="Prenom" [ngModel]>
        </div>
      </div>
      <div class="form-group">
        <label>Telephone</label>
        <input type="tel" #tel="ngModel" required [class.is-invalid]="tel.invalid"  class="form-control && tel.touched" class="form-control" name="tel" placeholder="Telephone" [ngModel]>
        <div *ngIf="tel.errors && (tel.valid || tel.untouched)">
        </div>

      </div>
      <div class="form-group">
        <label for="exampleInputEmail1">Addresse Email</label>
        <input type="email" class="form-control" name="email"   id="exampleInputEmail1"  placeholder="email" [ngModel]>
      </div>
      <div class="form-group">
        <label for="inputAddress">Addresse</label>
        <input type="text" class="form-control" name="adresse"  id="inputAddress" placeholder="Adresse" [ngModel]>
      </div>
      <div class="form-group">
        <label for="start">date début</label>
        <input type="date" id="start" name="trip-start"
               value="2021-1-20"
               name="dated" [ngModel]>
      </div>
      <div class="form-group">
        <label for="start">date fin</label>
        <input type="date" id="fin" name="trip-start"
               name="datef" [ngModel]>
      </div>
      <button [disabled]= "userForm.form.invalid" type="submit" class="submit-btn">Soummettre</button>

    </form>
</div>
<div class="user" *ngIf="submitted">
  <div class="container">
    <h1 class="h1">Your reservation has been registered successfully!</h1>
    <h3 class="h3" >To reserve an other studio go to <spin class="clickable"(click)="goToAR()" ><u>Available residences</u></spin></h3>
    <h3 class="h3" >To view the current reservations go to <spin class="clickable"(click)="goToR()"><u>Reservations</u></spin></h3>
  </div>
</div>
